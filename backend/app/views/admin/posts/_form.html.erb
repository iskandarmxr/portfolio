<%# Post Form Partial %>
<%= form_with model: [:admin, @post], class: "admin-form" do |f| %>
  <div class="form-grid">
    <div class="form-main">
      <div class="form-section glass-card">
        <h3>Content</h3>
        
        <div class="form-group">
          <label for="post_title">Title *</label>
          <%= f.text_field :title, class: "form-input", required: true, placeholder: "Post title" %>
        </div>
        
        <div class="form-group">
          <label for="post_slug">Slug</label>
          <%= f.text_field :slug, class: "form-input", placeholder: "auto-generated-from-title" %>
          <small class="form-hint">Leave empty to auto-generate from title</small>
        </div>
        
        <div class="form-group">
          <label for="post_excerpt">Excerpt</label>
          <%= f.text_area :excerpt, class: "form-input", rows: 3, placeholder: "Brief summary for listings..." %>
        </div>
        
        <div class="form-group">
          <label for="post_content">Content *</label>
          <%= f.text_area :content, class: "form-input content-editor", rows: 20, placeholder: "Write your post content here..." %>
        </div>
      </div>
    </div>
    
    <div class="form-sidebar">
      <div class="form-section glass-card">
        <h3>Status</h3>
        
        <div class="form-group">
          <label for="post_status">Publish Status</label>
          <%= f.select :status, Post::STATUSES.map { |s| [s.titleize, s] }, {}, class: "form-select" %>
        </div>
        
        <% if @post.published_at %>
          <p class="form-meta">
            Published: <%= @post.published_at.strftime('%B %d, %Y') %>
          </p>
        <% end %>
      </div>
      
      <div class="form-section glass-card">
        <h3>Cover Image</h3>
        
        <div class="form-group">
          <label for="post_cover">Upload Image</label>
          <%= f.file_field :cover, class: "form-file", accept: "image/*" %>
        </div>
        
        <% if @post.cover.attached? %>
          <div class="image-preview">
            <%= image_tag @post.cover.variant(resize_to_limit: [300, 200]) %>
          </div>
        <% end %>
        
        <div class="form-divider">or</div>
        
        <div class="form-group">
          <label for="post_cover_image">Image URL</label>
          <%= f.url_field :cover_image, class: "form-input", placeholder: "https://..." %>
        </div>
      </div>
      
      <div class="form-section glass-card">
        <h3>Tags</h3>
        <div class="form-group">
          <small class="form-hint">Enter tags separated by commas</small>
          <input type="text" name="post[tags][]" class="form-input"
                 value="<%= @post.tags&.join(', ') %>" placeholder="ruby, rails, web development">
        </div>
      </div>
    </div>
  </div>
  
  <div class="form-actions">
    <a href="<%= admin_posts_path %>" class="btn-outline">Cancel</a>
    <%= f.submit @post.new_record? ? "Create Post" : "Update Post", class: "btn-accent" %>
  </div>
<% end %>
