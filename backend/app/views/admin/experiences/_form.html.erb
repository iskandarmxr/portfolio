<%# Experience Form Partial %>
<%= form_with model: [:admin, @experience], class: "admin-form" do |f| %>
  <div class="form-grid">
    <div class="form-main">
      <div class="form-section glass-card">
        <h3>Position Details</h3>
        
        <div class="form-row">
          <div class="form-group">
            <label for="experience_company">Company *</label>
            <%= f.text_field :company, class: "form-input", required: true, placeholder: "e.g., Google" %>
          </div>
          
          <div class="form-group">
            <label for="experience_role">Role / Title *</label>
            <%= f.text_field :role, class: "form-input", required: true, placeholder: "e.g., Senior Software Engineer" %>
          </div>
        </div>
        
        <div class="form-row">
          <div class="form-group">
            <label for="experience_location">Location</label>
            <%= f.text_field :location, class: "form-input", placeholder: "e.g., San Francisco, CA" %>
          </div>
          
          <div class="form-group">
            <label for="experience_company_url">Company Website</label>
            <%= f.url_field :company_url, class: "form-input", placeholder: "https://..." %>
          </div>
        </div>
        
        <div class="form-group">
          <label for="experience_description">Description</label>
          <%= f.text_area :description, class: "form-input", rows: 4, placeholder: "Describe your role and responsibilities..." %>
        </div>
      </div>
      
      <div class="form-section glass-card">
        <h3>Duration</h3>
        
        <div class="form-row">
          <div class="form-group">
            <label for="experience_start_date">Start Date *</label>
            <%= f.date_field :start_date, class: "form-input", required: true %>
          </div>
          
          <div class="form-group">
            <label for="experience_end_date">End Date</label>
            <%= f.date_field :end_date, class: "form-input", id: "end-date-field" %>
            <small class="form-hint">Leave blank if current position</small>
          </div>
        </div>
        
        <div class="form-group">
          <label class="checkbox-label">
            <%= f.check_box :current, id: "current-checkbox" %>
            <span>I currently work here</span>
          </label>
        </div>
      </div>
    </div>
    
    <div class="form-sidebar">
      <div class="form-section glass-card">
        <h3>Company Logo</h3>
        <div class="form-group">
          <%= f.file_field :company_logo, class: "form-file", accept: "image/*" %>
          <small class="form-hint">Square image recommended (200x200px)</small>
        </div>
      </div>
    </div>
  </div>
  
  <div class="form-actions">
    <a href="<%= admin_experiences_path %>" class="btn-outline">Cancel</a>
    <%= f.submit @experience.new_record? ? "Add Experience" : "Update Experience", class: "btn-accent" %>
  </div>
<% end %>

<script>
  const currentCheckbox = document.getElementById('current-checkbox');
  const endDateField = document.getElementById('end-date-field');
  
  if (currentCheckbox && endDateField) {
    function toggleEndDate() {
      endDateField.disabled = currentCheckbox.checked;
      if (currentCheckbox.checked) {
        endDateField.value = '';
      }
    }
    
    currentCheckbox.addEventListener('change', toggleEndDate);
    toggleEndDate();
  }
</script>
